-- Test data seed file for wadeulwadeul-heroes
-- 모든 더미 데이터는 한글로 작성되었습니다.

-- Clear existing test data (optional, uncomment if needed)
-- TRUNCATE app.enrollments CASCADE;
-- TRUNCATE app.classes CASCADE;
-- TRUNCATE app.users CASCADE;

-- ============================================
-- Users (OLD type - 클래스 생성자)
-- ============================================
INSERT INTO app.users (id, name, email, type, created_at, updated_at) VALUES
    ('550e8400-e29b-41d4-a716-446655440001', '김선생', 'teacher.kim@example.com', 'old', NOW(), NOW()),
    ('550e8400-e29b-41d4-a716-446655440002', '박명인', 'master.park@example.com', 'old', NOW(), NOW()),
    ('550e8400-e29b-41d4-a716-446655440003', '이장인', NULL, 'old', NOW(), NOW()),
    ('550e8400-e29b-41d4-a716-446655440004', '정숙련', 'craft.jeong@example.com', 'old', NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

-- ============================================
-- Users (YOUNG type - 클래스 신청자)
-- ============================================
INSERT INTO app.users (id, name, email, type, created_at, updated_at) VALUES
    ('550e8400-e29b-41d4-a716-446655440011', '최영희', 'young.choi@example.com', 'young', NOW(), NOW()),
    ('550e8400-e29b-41d4-a716-446655440012', '정민지', 'minji.jung@example.com', 'young', NOW(), NOW()),
    ('550e8400-e29b-41d4-a716-446655440013', '강호동', 'hodong.kang@example.com', 'young', NOW(), NOW()),
    ('550e8400-e29b-41d4-a716-446655440014', '송지효', NULL, 'young', NOW(), NOW()),
    ('550e8400-e29b-41d4-a716-446655440015', '이광수', 'kwangsoo@example.com', 'young', NOW(), NOW()),
    ('550e8400-e29b-41d4-a716-446655440016', '오세훈', 'sehun.oh@example.com', 'young', NOW(), NOW()),
    ('550e8400-e29b-41d4-a716-446655440017', '김다인', 'dain.kim@example.com', 'young', NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

-- ============================================
-- Classes (OLD 사용자들이 생성한 클래스)
-- ============================================
INSERT INTO app.classes (
    id,
    creator_id,
    category,
    location,
    duration_minutes,
    capacity,
    years_of_experience,
    job_description,
    materials,
    price_per_person,
    template,
    created_at,
    updated_at
) VALUES
    (
        '650e8400-e29b-41d4-a716-446655440001',
        '550e8400-e29b-41d4-a716-446655440001',
        '돌담',
        '제주 제주시 애월읍',
        150,
        10,
        '25년',
        '제주 돌담 장인',
        '현무암 블록, 줄자, 망치, 장갑',
        '80000',
        '{"template": "체험 제목: \\"제주 돌담 쌓기 기초 체험\\"\\n\\n1) 오프닝 (5분)\\n- 제주 돌담 장인 인사와 안전 안내\\n\\n2) 준비 단계 (10분)\\n- 현무암, 장갑, 망치, 수평계 소개\\n\\n3) 핵심 체험 (30분)\\n- 돌 고르기, 바닥돌 놓기, 어긋나게 쌓기\\n\\n4) 마무리 (5분)\\n- 완성 점검 및 기념 촬영", "클래스 소개": "제주 돌담 기초를 배우는 체험", "난이도": "초급", "로드맵": "전통 돌담 보수와 마을 경관 프로젝트까지 확장"}',
        NOW(),
        NOW()
    ),
    (
        '650e8400-e29b-41d4-a716-446655440002',
        '550e8400-e29b-41d4-a716-446655440001',
        '감귤',
        '제주 서귀포시 남원읍',
        120,
        12,
        '18년',
        '감귤 농가 2대째',
        '로컬 감귤, 당도계, 착즙기, 선물용 상자',
        '45000',
        '{"template": "체험 제목: \\"감귤 수확과 착즙\\"\\n\\n1) 오프닝 (5분)\\n- 감귤 농부 인사, 안전 가위 사용 안내\\n\\n2) 준비 단계 (10분)\\n- 장갑, 가위, 바구니 지급\\n\\n3) 핵심 체험 (35분)\\n- 수확, 세척, 착즙 음료 만들기\\n\\n4) 마무리 (10분)\\n- 시음 및 포장", "클래스 소개": "감귤 수확부터 착즙까지 체험", "난이도": "초급", "로드맵": "농촌 체험 관광과 가공품 브랜드로 확장"}',
        NOW(),
        NOW()
    ),
    (
        '650e8400-e29b-41d4-a716-446655440003',
        '550e8400-e29b-41d4-a716-446655440001',
        '해녀',
        '제주 제주시 구좌읍',
        110,
        8,
        '30년',
        '해녀 협동조합 강사',
        '테왁, 망사리, 오리발, 잠수복 대여',
        '90000',
        '{"template": "체험 제목: \\"해녀 문화와 바다 체험\\"\\n\\n1) 오프닝 (5분)\\n- 해녀 안전 수칙, 장비 소개\\n\\n2) 준비 단계 (10분)\\n- 테왁, 망사리, 오리발 착용 안내\\n\\n3) 핵심 체험 (30분)\\n- 얕은 바다 입수, 소라 관찰 및 손질 시연\\n\\n4) 마무리 (5분)\\n- 체온 유지, 해산물 시식", "클래스 소개": "해녀 문화와 기초 물질 체험", "난이도": "초급", "로드맵": "해녀 해설 프로그램, 체험 관광, 바다 생태 콘텐츠로 확장"}',
        NOW(),
        NOW()
    ),
    (
        '650e8400-e29b-41d4-a716-446655440011',
        '550e8400-e29b-41d4-a716-446655440002',
        '요리',
        '제주 서귀포시 중문',
        140,
        10,
        '15년',
        '호텔 한식 수셰프',
        '제주 흑돼지, 자리돔 젓, 한라산 채소, 조리도구',
        '70000',
        '{"template": "체험 제목: \\"제주 향토 한상 요리\\"\\n\\n1) 오프닝 (5분)\\n- 셰프 인사, 메뉴 소개\\n\\n2) 준비 단계 (10분)\\n- 흑돼지, 자리돔 젓, 한라산 채소 손질\\n\\n3) 핵심 체험 (110분)\\n- 한상 3종 조리 및 플레이팅\\n\\n4) 마무리 (15분)\\n- 시식과 레시피 공유", "클래스 소개": "제주 향토 재료로 한상 차림을 만드는 수업", "난이도": "중급", "로드맵": "팝업 레스토랑, 지역 식문화 콘텐츠 제작으로 확장"}',
        NOW(),
        NOW()
    ),
    (
        '650e8400-e29b-41d4-a716-446655440012',
        '550e8400-e29b-41d4-a716-446655440002',
        '돌담',
        '제주 서귀포시 대정읍',
        160,
        9,
        '22년',
        '전통 석공',
        '현무암, 몰탈, 곡괭이, 수평계',
        '85000',
        '{"template": "체험 제목: \\"곡선 돌담 시공 실습\\"\\n\\n1) 오프닝 (5분)\\n- 전통 석공 인사, 안전 브리핑\\n\\n2) 준비 단계 (15분)\\n- 현무암, 몰탈, 곡괭이 사용법\\n\\n3) 핵심 체험 (120분)\\n- 곡선 돌담 시공, 배수로 설계와 시공\\n\\n4) 마무리 (20분)\\n- 흔들림 점검과 사진 촬영", "클래스 소개": "곡선 돌담 시공과 배수로 설계를 배우는 심화 과정", "난이도": "중급", "로드맵": "전통 경관 복원 프로젝트와 지역 공사 참여로 확장"}',
        NOW(),
        NOW()
    ),
    (
        '650e8400-e29b-41d4-a716-446655440013',
        '550e8400-e29b-41d4-a716-446655440002',
        '감귤',
        '제주 서귀포시 표선면',
        100,
        14,
        '14년',
        '감귤 가공업 대표',
        '감귤 잼 키트, 제스트 도구, 병입 용기',
        '38000',
        '{"template": "체험 제목: \\"감귤 마멀레이드·청 만들기\\"\\n\\n1) 오프닝 (5분)\\n- 가공 과정 소개\\n\\n2) 준비 단계 (10분)\\n- 감귤 세척, 제스트 도구 사용법\\n\\n3) 핵심 체험 (70분)\\n- 마멀레이드·청 2종 제조, 병입과 살균\\n\\n4) 마무리 (15분)\\n- 라벨링, 시식", "클래스 소개": "감귤 가공품을 직접 만들어보는 클래스", "난이도": "초급", "로드맵": "농가 가공 브랜드, 로컬 디저트 상품으로 확장"}',
        NOW(),
        NOW()
    ),
    (
        '650e8400-e29b-41d4-a716-446655440014',
        '550e8400-e29b-41d4-a716-446655440002',
        '해녀',
        '제주 제주시 한경면',
        100,
        10,
        '28년',
        '해녀 안전강사',
        '잠수복, 구명조끼, 조개 채취 허가 안내',
        '75000',
        '{"template": "체험 제목: \\"해녀 입문 클래스\\"\\n\\n1) 오프닝 (5분)\\n- 해녀 안전 체크리스트 공유\\n\\n2) 준비 단계 (10분)\\n- 잠수복, 구명조끼 착용, 허가 안내\\n\\n3) 핵심 체험 (70분)\\n- 얕은 입수, 전복 손질, 해산물 시식\\n\\n4) 마무리 (15분)\\n- 체온 유지와 정리", "클래스 소개": "해녀가 되는 길을 소개하는 입문 수업", "난이도": "초급", "로드맵": "해녀 관광 해설, 체험 코스 운영, 바다 생태 콘텐츠로 확장"}',
        NOW(),
        NOW()
    ),
    (
        '650e8400-e29b-41d4-a716-446655440015',
        '550e8400-e29b-41d4-a716-446655440002',
        '요리',
        '제주 제주시 연동',
        130,
        12,
        '12년',
        '로컬 푸드 셰프',
        '옥돔, 고사리, 톳, 돌문어, 주방도구',
        '68000',
        '{"template": "체험 제목: \\"제주 제철 3코스 요리\\"\\n\\n1) 오프닝 (5분)\\n- 코스 구성 안내\\n\\n2) 준비 단계 (15분)\\n- 옥돔, 고사리, 톳 손질\\n\\n3) 핵심 체험 (90분)\\n- 3코스 조리 및 플레이팅 촬영 팁\\n\\n4) 마무리 (20분)\\n- 시식과 피드백", "클래스 소개": "제철 식재료로 코스 요리를 만드는 수업", "난이도": "중급", "로드맵": "팝업 다이닝, 로컬 메뉴 개발, 푸드 콘텐츠 제작으로 확장"}',
        NOW(),
        NOW()
    ),
    (
        '650e8400-e29b-41d4-a716-446655440021',
        '550e8400-e29b-41d4-a716-446655440003',
        '목공',
        '제주 서귀포시 강정동',
        170,
        8,
        '20년',
        '목공방 운영자',
        '삼나무 집성판, 톱, 사포, 친환경 오일',
        '95000',
        '{"template": "체험 제목: \\"목공 스툴 제작\\"\\n\\n1) 오프닝 (5분)\\n- 목공 안전 수칙\\n\\n2) 준비 단계 (15분)\\n- 목재, 톱, 사포, 오일 소개\\n\\n3) 핵심 체험 (130분)\\n- 스툴 자르기·조립·샌딩·오일 마감\\n\\n4) 마무리 (20분)\\n- 완성 점검", "클래스 소개": "목공 스툴 제작을 배우는 기초 수업", "난이도": "초급", "로드맵": "가구 제작, 소품 판매, 메이커스페이스 운영으로 확장"}',
        NOW(),
        NOW()
    ),
    (
        '650e8400-e29b-41d4-a716-446655440022',
        '550e8400-e29b-41d4-a716-446655440003',
        '목공',
        '제주 제주시 구좌읍',
        200,
        6,
        '18년',
        '친환경 가구 제작자',
        '편백 원목, 직쏘, 목공 본드, 방진마스크',
        '110000',
        '{"template": "체험 제목: \\"목공 협탁 제작\\"\\n\\n1) 오프닝 (5분)\\n- 친환경 목공 소개\\n\\n2) 준비 단계 (15분)\\n- 편백, 직쏘, 본드, 마스크 사용법\\n\\n3) 핵심 체험 (160분)\\n- 협탁 재단, 조립, 샌딩, 오일 마감\\n\\n4) 마무리 (20분)\\n- 완성 확인", "클래스 소개": "협탁을 직접 만드는 심화 목공 수업", "난이도": "중급", "로드맵": "친환경 가구 브랜드와 워크숍 운영으로 확장"}',
        NOW(),
        NOW()
    ),
    (
        '650e8400-e29b-41d4-a716-446655440023',
        '550e8400-e29b-41d4-a716-446655440003',
        '감귤',
        '제주 제주시 조천읍',
        90,
        16,
        '9년',
        '향료 개발자',
        '감귤 껍질 파우더, 비누 베이스, 에센셜 오일',
        '42000',
        '{"template": "체험 제목: \\"감귤 향 비누\\"\\n\\n1) 오프닝 (5분)\\n- 향료 개발자 인사와 안전 안내\\n\\n2) 준비 단계 (10분)\\n- 감귤 껍질 파우더, 비누 베이스 준비\\n\\n3) 핵심 체험 (60분)\\n- 비누 2개 제작, 향 조합, 굳히기\\n\\n4) 마무리 (15분)\\n- 포장 및 보관법", "클래스 소개": "감귤 향을 입힌 비누를 만드는 클래스", "난이도": "초급", "로드맵": "핸드메이드 뷰티 상품, 클래스 운영으로 확장"}',
        NOW(),
        NOW()
    ),
    (
        '650e8400-e29b-41d4-a716-446655440031',
        '550e8400-e29b-41d4-a716-446655440004',
        '목공',
        '제주 제주시 노형동',
        140,
        10,
        '14년',
        '바리스타 겸 목공 강사',
        '원목 패널, 드릴, 나사, 오일 스테인',
        '72000',
        '{"template": "체험 제목: \\"목공 드립 스탠드\\"\\n\\n1) 오프닝 (5분)\\n- 바리스타 겸 목공 강사 인사\\n\\n2) 준비 단계 (10분)\\n- 원목 패널, 드릴, 나사 준비\\n\\n3) 핵심 체험 (100분)\\n- 드립 스탠드 설계, 조립, 스테인\\n\\n4) 마무리 (25분)\\n- 커피 드립 시연과 시음", "클래스 소개": "카페 소품을 직접 만드는 목공 클래스", "난이도": "초급", "로드맵": "카페 인테리어 소품 제작과 판매로 확장"}',
        NOW(),
        NOW()
    ),
    (
        '650e8400-e29b-41d4-a716-446655440032',
        '550e8400-e29b-41d4-a716-446655440004',
        '요리',
        '제주 서귀포시 성산읍',
        120,
        12,
        '11년',
        '어선 경력 선장',
        '갓 잡은 옥돔, 해조류, 숯불 그릴, 양념 키트',
        '76000',
        '{"template": "체험 제목: \\"선상 해산물 화덕구이\\"\\n\\n1) 오프닝 (5분)\\n- 선장 인사, 안전 브리핑\\n\\n2) 준비 단계 (10분)\\n- 옥돔, 해조류 손질, 숯불 예열\\n\\n3) 핵심 체험 (85분)\\n- 해산물 손질, 화덕 구이, 미역국 끓이기\\n\\n4) 마무리 (20분)\\n- 시식 및 정리", "클래스 소개": "배 위에서 해산물 화덕구이를 배우는 클래스", "난이도": "초급", "로드맵": "선상 투어, 해산물 요리 콘텐츠로 확장"}',
        NOW(),
        NOW()
    )
ON CONFLICT (id) DO NOTHING;

-- ============================================
-- Enrollments (YOUNG 사용자들의 클래스 신청)
-- ============================================
INSERT INTO app.enrollments (id, class_id, user_id, applied_date, headcount) VALUES
    ('750e8400-e29b-41d4-a716-446655440001', '650e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440011', '2025-12-05', 2),
    ('750e8400-e29b-41d4-a716-446655440002', '650e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440012', '2025-12-06', 1),
    ('750e8400-e29b-41d4-a716-446655440003', '650e8400-e29b-41d4-a716-446655440002', '550e8400-e29b-41d4-a716-446655440013', '2025-12-07', 2),
    ('750e8400-e29b-41d4-a716-446655440004', '650e8400-e29b-41d4-a716-446655440003', '550e8400-e29b-41d4-a716-446655440014', '2025-12-08', 3),
    ('750e8400-e29b-41d4-a716-446655440005', '650e8400-e29b-41d4-a716-446655440011', '550e8400-e29b-41d4-a716-446655440011', '2025-12-09', 1),
    ('750e8400-e29b-41d4-a716-446655440006', '650e8400-e29b-41d4-a716-446655440012', '550e8400-e29b-41d4-a716-446655440012', '2025-12-09', 1),
    ('750e8400-e29b-41d4-a716-446655440007', '650e8400-e29b-41d4-a716-446655440012', '550e8400-e29b-41d4-a716-446655440015', '2025-12-10', 2),
    ('750e8400-e29b-41d4-a716-446655440008', '650e8400-e29b-41d4-a716-446655440013', '550e8400-e29b-41d4-a716-446655440016', '2025-12-10', 1),
    ('750e8400-e29b-41d4-a716-446655440009', '650e8400-e29b-41d4-a716-446655440014', '550e8400-e29b-41d4-a716-446655440017', '2025-12-11', 2),
    ('750e8400-e29b-41d4-a716-446655440010', '650e8400-e29b-41d4-a716-446655440015', '550e8400-e29b-41d4-a716-446655440011', '2025-12-11', 1),
    ('750e8400-e29b-41d4-a716-446655440011', '650e8400-e29b-41d4-a716-446655440021', '550e8400-e29b-41d4-a716-446655440014', '2025-12-12', 1),
    ('750e8400-e29b-41d4-a716-446655440012', '650e8400-e29b-41d4-a716-446655440022', '550e8400-e29b-41d4-a716-446655440015', '2025-12-13', 2),
    ('750e8400-e29b-41d4-a716-446655440013', '650e8400-e29b-41d4-a716-446655440022', '550e8400-e29b-41d4-a716-446655440011', '2025-12-14', 1),
    ('750e8400-e29b-41d4-a716-446655440014', '650e8400-e29b-41d4-a716-446655440023', '550e8400-e29b-41d4-a716-446655440013', '2025-12-15', 2),
    ('750e8400-e29b-41d4-a716-446655440015', '650e8400-e29b-41d4-a716-446655440031', '550e8400-e29b-41d4-a716-446655440012', '2025-12-16', 1),
    ('750e8400-e29b-41d4-a716-446655440016', '650e8400-e29b-41d4-a716-446655440032', '550e8400-e29b-41d4-a716-446655440017', '2025-12-16', 2),
    ('750e8400-e29b-41d4-a716-446655440017', '650e8400-e29b-41d4-a716-446655440032', '550e8400-e29b-41d4-a716-446655440011', '2025-12-17', 1)
ON CONFLICT (id) DO NOTHING;

-- ============================================
-- 데이터 통계 출력 (검증용)
-- ============================================

-- 총 사용자 수
SELECT
    'Users Summary' as info,
    type,
    COUNT(*) as count,
    COUNT(email) as with_email,
    COUNT(*) - COUNT(email) as without_email
FROM app.users
GROUP BY type
ORDER BY type;

-- 총 클래스 수 (생성자별)
SELECT
    'Classes Summary' as info,
    u.name as creator_name,
    COUNT(c.id) as total_classes,
    COUNT(e.id) as total_enrollments
FROM app.classes c
JOIN app.users u ON c.creator_id = u.id
LEFT JOIN app.enrollments e ON c.id = e.class_id
GROUP BY u.name
ORDER BY u.name;

-- 클래스별 신청자 수
SELECT
    'Enrollment Summary' as info,
    c.category,
    c.location,
    COUNT(e.id) as enrollment_count,
    COALESCE(SUM(e.headcount), 0) as total_headcount,
    c.capacity
FROM app.classes c
LEFT JOIN app.enrollments e ON c.id = e.class_id
GROUP BY c.id, c.category, c.location, c.capacity
ORDER BY c.category;
